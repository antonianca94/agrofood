<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>

    <link href="/public/css/bootstrap.css" rel="stylesheet" />
    <link href="/public/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
    <link href="/public/css/agrofood.css" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>

    <style>

        /* Estilos Mobile Responsivos */
        @media (max-width: 991.98px) {

            

            /* Corrigir scroll horizontal */
            body.home {
                overflow-x: hidden;
                width: 100%;
            }

            .container-fluid {
                padding-left: 0 !important;
                padding-right: 0 !important;
                overflow-x: hidden;
            }

            /* Ajustes Slick Carousel */
            .slick-carousel {
                margin: 0 -5px;
            }

            .slick-list {
                overflow: visible;
                padding-bottom: 30px !important;
            }

            .slick-dots {
                bottom: 0px !important;
            }

            .slick-prev,
            .slick-next {
                z-index: 10;
            }


            body.home {
                padding-bottom: 70px;
            }

            /* Ajustes do carousel */
            .carousel-item img {
                height: 100%;
                object-fit: cover;
            }

            .carousel-indicators {
                bottom: 5px;
            }

            /* Ajustes das categorias */
            .category-box {
                margin-bottom: 1rem;
            }

            .category-box .row {
                flex-direction: column;
                text-align: center;
            }

            .category-box .col-md-4 {
                padding: 1rem;
            }

            .category-box .col-md-4 img {
                width: 80px !important;
            }

            .category-box .card-body {
                padding: 0.5rem 1rem 1rem;
            }

            /* Ajustes dos produtos */
            .container.mt-5 {
                margin-top: 2rem !important;
            }

            .listing-products {
                margin: 0.5rem !important;
            }

            .listing-products .card-body {
                padding: 0.75rem;
            }

            .listing-products .card-title {
                font-size: 0.95rem;
            }

            .listing-products .c-orange {
                font-size: 0.9rem;
            }

            /* Container responsivo */
            .container {
                padding-left: 15px !important;
                padding-right: 15px !important;
                overflow-x: hidden;
            }

            /* Prevenir overflow do row */
            .row {
                margin-left: 0 !important;
                margin-right: 0 !important;
            }

            /* Slick no mobile */
            .slick-list {
                padding-bottom: 40px !important;
            }

            .slick-dots {
                bottom: 5px !important;
            }
        }

        @media (max-width: 575.98px) {
            .carousel-item img {
                height: 100%;
            }

            .gx-5 {
                --bs-gutter-x: 1rem;
            }

            .category-box .card-title {
                font-size: 1rem;
            }

            /* Mais espaço para dots no mobile pequeno */
            .slick-list {
                padding-bottom: 45px !important;
            }
        }
    </style>
</head>
<body class="home">

    <%- include('header') %>

    <div class="container-fluid p-0">
        <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
            <!-- Carousel indicators -->
            <ol class="carousel-indicators">
                <li data-bs-target="#myCarousel" data-bs-slide-to="0" class="active"></li>
                <li data-bs-target="#myCarousel" data-bs-slide-to="1"></li>
                <li data-bs-target="#myCarousel" data-bs-slide-to="2"></li>
            </ol>
            
            <!-- Wrapper for carousel items -->
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/public/img/banner001.png" class="d-block w-100" alt="Slide 1">
                </div>
                <div class="carousel-item">
                    <img src="/public/img/banner002.png" class="d-block w-100" alt="Slide 2">
                </div>
                <div class="carousel-item">
                    <img src="/public/img/banner003.png" class="d-block w-100" alt="Slide 3">
                </div>
            </div>
    
            <!-- Carousel controls -->
            <a class="carousel-control-prev" href="#myCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#myCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </a>
        </div>
    </div>

    <div class="container mt-5 px-0">
        <div class="row gx-5">
            <div class="col-12 col-md-6 col-lg-3">
                <a href="/categoria/1" class="text-decoration-none">
                    <div class="category-box p-0 bg-white rounded">
                        <div class="row g-0">
                            <div class="col-md-4 d-flex justify-content-center align-items-center">
                                <img src="/uploads/lychee.png" class="d-block w-50">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title m-0">Frutas</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <a href="/categoria/2" class="text-decoration-none">
                    <div class="category-box p-0 bg-white rounded">
                        <div class="row g-0">
                            <div class="col-md-4 d-flex justify-content-center align-items-center">
                                <img src="/uploads/broccoli.png" class="d-block w-50">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title m-0">Legumes</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <a href="/categoria/3" class="text-decoration-none">
                    <div class="category-box p-0 bg-white rounded">
                        <div class="row g-0">
                            <div class="col-md-4 d-flex justify-content-center align-items-center">
                                <img src="/uploads/cabbage.png" class="d-block w-50">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title m-0">Verduras</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-12 col-md-6 col-lg-3">
                <a href="/categoria/7" class="text-decoration-none">
                    <div class="category-box p-0 bg-white rounded">
                        <div class="row g-0">
                            <div class="col-md-4 d-flex justify-content-center align-items-center">
                                <img src="/uploads/palm-fruit.png" class="d-block w-50">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title m-0">Grãos</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <div class="container mt-5 mb-5 pt-4 pb-4 bg-white">
        <div class="row">
            <p class="fs-5 ps-3"><i class="bi bi-patch-plus c-orange"></i> Últimos adicionados</p>
            <div class="slick-carousel last-products">
                <% products.forEach(product => { %>
                    <div>
                        <div class="listing-products m-2">
                            <div class="product-image-div">
                                <a href="/produto/<%= product.sku %>">
                                    <img src="<%= product.image_path %>" class="card-img-top" alt="<%= product.name %>">
                                </a>
                                <div class="card-body">
                                    <a href="/produto/<%= product.sku %>"> 
                                        <h5 class="card-title"><%= product.name %></h5> 
                                    </a>
                                    <p class="c-orange">R$ <%= product.price %></p>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>

    <div class="container mt-5 mb-5 pt-4 pb-4 bg-white">
        <div class="row">
            <p class="fs-5 ps-3"><i class="bi bi-patch-plus c-orange"></i> Mais Vendidos</p>
            <div class="slick-carousel last-products">
                <% 
                const sortedProducts = products.sort((a, b) => a.price - b.price);
                sortedProducts.forEach(product => { %>
                    <div>
                        <div class="listing-products m-2">
                            <div class="product-image-div">
                                <a href="/produto/<%= product.sku %>">
                                    <img src="<%= product.image_path %>" class="card-img-top" alt="<%= product.name %>">
                                </a>
                                <div class="card-body">
                                    <a href="/produto/<%= product.sku %>"> 
                                        <h5 class="card-title"><%= product.name %></h5> 
                                    </a>
                                    <p class="c-orange">R$ <%= product.price %></p>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>
    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/public/js/bootstrap.js"></script>
<script src="/public/js/bootstrap.min.js"></script>
<script src="/public/js/bootstrap.bundle.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script>
    // Inicialize o carrossel usando Slick
    $(document).ready(function(){
        $('.slick-carousel').slick({
            slidesToShow: 4,
            slidesToScroll: 1,
            autoplay: true,
            autoplaySpeed: 2000,
            prevArrow: '<button type="button" class="slick-prev">&#10094;</button>',
            nextArrow: '<button type="button" class="slick-next">&#10095;</button>',
            infinite: true,
            responsive: [
                {
                    breakpoint: 992,
                    settings: {
                        slidesToShow: 3
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 2
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        slidesToShow: 1
                    }
                }
            ]
        });
    });

    $(window).on('load', function() {
        $('.product-image-div').css('opacity', '1');
    });
</script>

<%- include('footer') %>

</body>
</html>